# 🧷 Web Security

## 해시(Hash)

---

### 개념

무언가를 잘게 쪼갠 후 결과물을 생성하는 과정
데이터를 변환하고 압축하여 효율적으로 저장하고 검색하기 위해서 사용됨.

> **해시 함수**
> 데이터를 고정된 크기로 출력하는 함수.

### 예시

> **나머지 계산**
> 입력: [0 ~ 9] -> x % 5 -> 출력: [0 ~ 4]

**-> 입력값에 따라 고정된 길이의 해시값을 생성할 수 있음.**

> **SHA-1**
> SHA1("The quick brown fox jumps over the lazy dog ") = 2fd4e1c67a2d28fced849ee1bb76e7391b93eb12
> SHA1("The quick brown fox jumps over the lazy dog.") = 408d94384216f890ff7a0c3528e8bed1e0b01621

**-> '.' 하나 만으로 값이 완전히 바뀜.**

## ✖️ 현재 쓰이지 않는 알고리즘

---

### 1. MD5(Message-Digest Algorithm)

- **개념**
  보낸 파일과 받은 파일이 일치하는지 확인하는 해시 함수를 기반으로 인증에 사용되는 알고리즘.

- **작동 방식**
  전체 파일을 읽어 원본 파일과 일치하는 서명을 생성하여 일치하는지 인증함.
  데이터를 크기에 상관 없이 항상 32자의 문자열로 변환함.(16바이트, 16진수)

- **사용처**
  파일을 인증하는 데 사용함.
  파일 복사본과 원본을 해시값으로 비교하는 것이 일일히 대조하는 것보다 쉽기 때문.

  현재에는 암호화 목적으로 사용 되지 않기 때문에 암호화가 목적이라면 다른 방식을 사용해야 함.

### 2. SHA-1(Secure Hash Algorithm)

- **개념**
  인터넷 보안 프로토콜과 공개키 인증서에도 적용되고 있는 매우 중요한 암호학적 해시 함수들의 모음.

- **작동 방식**
  임이의 길이의 데이터를 160비트의 해시값으로 바꿈.

- **특징**
  MD5보다 빠르며 더 높은 보안성을 지님.
  동일한 메세지 다이제스트 값을 지닌 서로 다른 2개의 메세지를 찾기 어려움.
  원본 메세지의 조그마한 변화에도 메세지 다이제스트에 급속하게 변화를 전파함.

- **문제점**
  모든 OS, 브라우저에서 지원을 중단되었고 SHA-2로 대체 되는 중.
  무차별 대입 공격으로 동일한 해시를 만들 수 있기에 더 이상 안전하지 않음.

- **종류**
  1. SHA-0: 160비트
  2. SHA-1: 160비트
  3. SHA-2: 다양한 길이
  4. SHA-3: 더욱 강화된 안정성

### 3. DES(Data Encryption Standard Algorithm)

- **개념**
  Feistel 암호 구조를 기반으로함.

  64비트 암호문을 사용하며 56비트의 Key를 사용함.(56비트인 이유는 7비트마다 오류 검출을 위한 페리티 비트가 들어가기 때문.)

  16개의 라운드를 거치며 56비트짜리 원래 키로부터 16개의 서브키를 생성하고 각 라운드에서 사용함.

- **문제점**
  현재에는 컴퓨터가 발전하여 암호가 해독되기 때문에 사용하지 않음.

## ⭕ 현재 쓰이는 알고리즘

---

### 1. SHA-2

- **개념**
  SHA-1 함수의 문제점이 발견되고 공격이 실현되자 새롭게 국제 표준이 된 함수.

- **문제점**
  SHA-1 함수와 굉장히 유사하기 때문에 보안 취약성이 남아있음.
  -> SHA-3 함수로 대체될 수 있다고 함.

### 2. Bcrypt

- **개념**
  단방향 암호화 함수.

- **기존 해시 함수들의 취약점**
  기존 해시 함수들은 원래 암호화를 위해 설계된 것이 아니고 짧은 시간에 데이터를 검색하기 위한 자료구조료 설계가 되어있어서 보안이 취약함.

  Rainbow table attack - 미리 해시 값을 계산해 놓은 테이블을 가지고 해시값을 역추적해 원래 정보를 찾아내는 해킹 방법.

  -> Bcrypt는 이러한 취약점을 보안했음.

- **Salting과 키 스트레칭**
  키 스트레칭 - 단방향 해시 값을 계산 후 다시 이를 해시하는 것을 반복하는 방법. 짧은 시간에 데이터를 검색하기 위한 구조로 설계 되어 있는 자료구조를 보완함.

  Salting - 실제 정보 이외에 추가 무작위 정보를 더해서 해시 값을 계산하는 방법. Rainbow table attack과 같은 공격을 무효화 시킴.

- **예제**
  > **Bcrypt**
  > $2b$12$76taFAFPE9ydE0ZsuWkIZexWVjLBbTTHWc509/OLI5nM9d5r3fkRG
  > Alg : 2b -> 알고리즘 식별자
  > Cost : 12 -> 키 스트레칭 횟수, 2^cost
  > Salt : 76taFAFPE9ydE0ZsuWkIZe -> 22자, base64로 인코딩
  > Hash : xWVjLBbTTHWc509/OLI5nM9d5r3fkRG -> 해시값
