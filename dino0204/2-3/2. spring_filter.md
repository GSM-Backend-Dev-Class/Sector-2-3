# ğŸ§· Spring

## DispatcherServlet(Front Contoller) - ì‚¬ì „ ì§€ì‹

---

HTTP ìš”ì²­ & ì‘ë‹µê³¼ ê´€ë ¨ëœ ê¸°ìˆ .
HTTP í”„ë¡œí† ì½œë¡œ ë“¤ì–´ì˜¤ëŠ” ëª¨ë“  ìš”ì²­ì„ ë¨¼ì € ë°›ì•„ì„œ ì í•©í•œ ì»¨íŠ¸ë¡¤ëŸ¬ì— ìœ„ì„(Delegate request)í•˜ëŠ” ì—­í• ì„ í•¨.

![servlet_engine](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2Feqvx1X%2FbtrYtS95rUJ%2FZGHNxse0F6SUJpVEx5q1ck%2Fimg.png)

### ì ˆì°¨

![dispatcherServlet](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FHIDVq%2FbtrYsOfQdVD%2FbYJ3lkkxINacwlX4kuJ5x0%2Fimg.png)

1. í´ë¼ì´ì–¸íŠ¸ì˜ ëª¨ë“  ìš”ì²­ì„ ë°›ìŒ.
2. ìš”ì²­ ì •ë³´ì— ê´€í•œ HandlerMappingì— ìœ„ì„í•˜ì—¬ ì²˜ë¦¬í•  Handler(Controller)ë¥¼ íƒìƒ‰í•¨.
3. ìœ„ì—ì„œ ì°¾ì€ Handlerì„ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ” HandlerAdapterë¥¼ íƒìƒ‰í•¨.
4. HandlerAdapterëŠ” Controllerì— ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì²˜ë¦¬ë¥¼ í˜¸ì¶œí•¨.
5. Controller ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ìˆ˜í–‰ -> ì²˜ë¦¬ ê²°ê³¼ë¥¼ Modelì— ì„¤ì • -> HandlerAdapterì— View Nameì„ ë°˜í™˜(ëª¨ë¸ì„ ë°˜í™˜í•˜ë©´ Viewê°€ ë Œë”ë§ì´ ë¨)
6. ìœ„ì—ì„œ ë°˜í™˜ëœ View Nameì„ ViewResolverì—ê²Œ ì „ë‹¬ -> í•´ë‹¹ View ê°ì²´ ë°˜í™˜
7. Viewì—ê²Œ Model ì „ë‹¬ -> í™”ë©´ í‘œì‹œ ìš”ì²­
8. í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì‘ë‹µ ë°˜í™˜.

### ì¥ì 

- ê³¼ê±°ì— ë¹„í•´ì„œ êµ‰ì¥íˆ ê°„í¸í•´ì§

## Filter

---

í´ë¼ì´ì–¸íŠ¸ì—ì„œ ìš”ì²­ì´ ë“¤ì–´ì˜¤ëŠ” ê²½ìš°, Dispatcher Servletì„ ê±°ì¹˜ê¸°ì „ ìš”ì²­ ì‚¬í•­ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ í•„í„° ë¡œì§ì„ ìˆ˜í–‰í•œë‹¤.
ëŒ€í‘œì ìœ¼ë¡œ Spring Securityë¥¼ í™œìš©í•˜ì—¬ ìš”ì²­ì— ëŒ€í•œ í•„í„° ê¸°ë°˜ ì¸ì¦, ì¸ê°€ ì²˜ë¦¬ë¥¼ ìˆ˜í–¥í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•œë‹¤ê³  í•œë‹¤.

![spring_filter_life_cycle](https://velog.velcdn.com/images/beberiche/post/64ed78c7-5381-4f34-8dbd-51b0d835754f/image.png)

### ì ˆì°¨

- ì˜¬ë°”ë¥¸ ì „ì†¡ ì‹œ
  - HTTP Request -> WAS -> Filter -> Dispatcher Servlet -> Controller
- ì „ì†¡ ì œí•œ ì‹œ
  - HTTP Request -> WAS -> Filter -> Return Invalid Response
- ë‹¤ì¤‘ í•„í„° ì ìš© ì‹œ
  - HTTP Request -> WAS -> Filter1,2,3,n -> Dispatcher Servlet -> Controller

### Filter ì£¼ìš” Method

Servlet FilterëŠ” javax.servlet.Filter ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ì—¬ ë§Œë“¤ì–´ì§.

**void init(FilterConfig config)**
í•„í„°ë¥¼ ì´ˆê¸°í™”í•˜ê³  ì„¤ì •í•˜ëŠ” ë©”ì„œë“œ

**void destroy()**
í•„í„°ê°€ ì†Œë©¸ë  ë•Œ í˜¸ì¶œë˜ëŠ” ë©”ì„œë“œ

**void doFilter(ServletRequest request, ServletResponse response, FilterChain chain)**
í•„í„°ê°€ ìˆ˜í–‰í•´ì•¼í•˜ëŠ” ë¡œì§ì„ ì‘ì„±í•˜ëŠ” ë©”ì„œë“œ(ìˆ˜í–‰ í›„ ì‘ë‹µì„ ì „ë‹¬í•  ìˆ˜ ìˆë‹¤.)
